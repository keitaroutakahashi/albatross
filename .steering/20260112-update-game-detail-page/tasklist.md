# タスクリスト

## 🚨 タスク完全完了の原則

**このファイルの全タスクが完了するまで作業を継続すること**

### 必須ルール

- **全てのタスクを`[x]`にすること**
- 「時間の都合により別タスクとして実施予定」は禁止
- 「実装が複雑すぎるため後回し」は禁止
- 未完了タスク（`[ ]`）を残したまま作業を終了しない

### 実装可能なタスクのみを計画

- 計画段階で「実装可能なタスク」のみをリストアップ
- 「将来やるかもしれないタスク」は含めない
- 「検討中のタスク」は含めない

### タスクスキップが許可される唯一のケース

以下の技術的理由に該当する場合のみスキップ可能:

- 実装方針の変更により、機能自体が不要になった
- アーキテクチャ変更により、別の実装方法に置き換わった
- 依存関係の変更により、タスクが実行不可能になった

スキップ時は必ず理由を明記:

```markdown
- [x] ~~タスク名~~（実装方針変更により不要: 具体的な技術的理由）
```

### タスクが大きすぎる場合

- タスクを小さなサブタスクに分割
- 分割したサブタスクをこのファイルに追加
- サブタスクを 1 つずつ完了させる

---

## フェーズ 1: データモデル拡張

- [x] GameData型を拡張
  - [x] summary（戦評）フィールドを追加
  - [x] pitchers（責任投手情報）フィールドを追加
  - [x] homeRuns（本塁打情報）フィールドを追加
  - [x] duration（試合時間）フィールドを追加
  - [x] participants（参加人数）フィールドを追加
- [x] ダミーデータを更新
  - [x] 既存の2件のデータに新フィールドを追加

## フェーズ 2: コンポーネント実装

- [x] GameSummaryコンポーネントを実装
  - [x] コンポーネントファイルを作成（gameSummary.tsx）
  - [x] 戦評の表示ロジックを実装
  - [x] データがない場合の非表示ロジックを実装

- [x] GamePitchersコンポーネントを実装
  - [x] コンポーネントファイルを作成（gamePitchers.tsx）
  - [x] 勝利投手、敗戦投手、セーブ投手の表示を実装
  - [x] 本塁打の表示を実装
  - [x] データがない場合の「-」表示を実装

- [x] GameStatsコンポーネントを実装
  - [x] コンポーネントファイルを作成（gameStats.tsx）
  - [x] 試合時間の表示を実装
  - [x] 参加人数の表示を実装

## フェーズ 3: ページ統合

- [x] page.tsxを更新
  - [x] 新コンポーネントをインポート
  - [x] レイアウトに新コンポーネントを配置

## フェーズ 4: 品質チェックと修正

- [x] すべてのテストが通ることを確認
  - [x] `pnpm test`
- [x] リントエラーがないことを確認
  - [x] `pnpm run lint`（biome lintは通過、knipの警告は既存の問題）
- [x] 型エラーがないことを確認
  - [x] `pnpm run typecheck`

## フェーズ 5: ドキュメント更新

- [x] 実装後の振り返り（このファイルの下部に記録）

---

## 実装後の振り返り

### 実装完了日

2026-01-12

### 計画と実績の差分

**計画と異なった点**:

- biome lintでarray indexをkeyに使用している箇所を指摘され、修正が必要だった
- knipの警告（未使用の@testing-library/react、unlisted jsdom）は既存の問題として対応せず

**新たに必要になったタスク**:

- lintエラー修正: gamePitchers.tsxのmapキーを`index`から`${hr.playerName}-${hr.count}`に変更

**技術的理由でスキップしたタスク**:

- なし（全タスク完了）

### 学んだこと

**技術的な学び**:

- Next.js Server Componentsでの条件付きレンダリング（データがない場合はnullを返す）
- 既存コンポーネント（gameHeader.tsx, scoreBoard.tsx）のパターンを踏襲することで一貫性を保てる
- TypeScript optionalプロパティ（`?`）を使用した型拡張の設計

**プロセス上の改善点**:

- tasklist.mdのフェーズ分けが明確で、段階的な実装が容易だった
- サブタスクを細かく定義したことで、進捗が可視化しやすかった
- 参考URLから具体的な要件を抽出し、スコープを明確に定義できた

### 次回への改善提案

- テスト追加をスコープに含める場合は、tasklist.mdにテストタスクを明示的に追加する
- TSDocコメントを計画段階で検討し、必要に応じてタスクに含める
- knip警告の解消は別タスクとして管理する方が良い（既存問題と新規実装を分離）
