# タスクリスト

## 🚨 タスク完全完了の原則

**このファイルの全タスクが完了するまで作業を継続すること**

### 必須ルール

- **全てのタスクを`[x]`にすること**
- 「時間の都合により別タスクとして実施予定」は禁止
- 「実装が複雑すぎるため後回し」は禁止
- 未完了タスク（`[ ]`）を残したまま作業を終了しない

### 実装可能なタスクのみを計画

- 計画段階で「実装可能なタスク」のみをリストアップ
- 「将来やるかもしれないタスク」は含めない
- 「検討中のタスク」は含めない

### タスクスキップが許可される唯一のケース

以下の技術的理由に該当する場合のみスキップ可能:

- 実装方針の変更により、機能自体が不要になった
- アーキテクチャ変更により、別の実装方法に置き換わった
- 依存関係の変更により、タスクが実行不可能になった

スキップ時は必ず理由を明記:

```markdown
- [x] ~~タスク名~~（実装方針変更により不要: 具体的な技術的理由）
```

### タスクが大きすぎる場合

- タスクを小さなサブタスクに分割
- 分割したサブタスクをこのファイルに追加
- サブタスクを 1 つずつ完了させる

---

## フェーズ 1: データ準備

- [x] ダミーデータの拡張
  - [x] イニングスコア（innings）フィールドを追加
  - [x] isHome フィールドを追加
  - [x] result フィールドを "win" | "lose" | "draw" 型に統一

## フェーズ 2: 詳細ページ実装

- [x] ディレクトリ構造の作成
  - [x] `src/app/(public)/games/[id]/` ディレクトリ作成
  - [x] `src/app/(public)/games/[id]/_components/` ディレクトリ作成

- [x] page.tsx の実装
  - [x] 動的ルートパラメータからIDを取得
  - [x] ダミーデータから該当試合を検索
  - [x] 存在しない場合は notFound() を呼び出し
  - [x] GameHeader と ScoreBoard コンポーネントを配置

- [x] GameHeader コンポーネントの実装
  - [x] 試合日付（月.日）の表示
  - [x] 曜日・年の表示
  - [x] リーグ名の表示
  - [x] グラウンド名の表示
  - [x] 戻るリンクの実装

- [x] ScoreBoard コンポーネントの実装
  - [x] イニングごとの得点テーブル
  - [x] チーム名の表示
  - [x] 合計得点の表示
  - [x] 勝敗に応じた色分け（勝ち: 緑系、負け: 赤系、引き分け: グレー系）
  - [x] モバイル対応（横スクロール）

## フェーズ 3: 一覧との連携

- [x] gameItem.tsx の修正
  - [x] Link コンポーネントでラップして詳細ページへ遷移

## フェーズ 4: 品質チェックと修正

- [x] すべてのテストが通ることを確認
  - [x] `pnpm test`
- [x] リントエラーがないことを確認
  - [x] `pnpm run lint`（既存の依存関係問題のみ、今回の実装に問題なし）
- [x] 型エラーがないことを確認
  - [x] `pnpm run typecheck`

## フェーズ 5: ドキュメント更新

- [x] 実装後の振り返り（このファイルの下部に記録）

---

## 実装後の振り返り

### 実装完了日

2026-01-12

### 計画と実績の差分

**計画と異なった点**:

- gameItem.tsx の修正時に、勝敗バッジの表示ロジックも追加した（resultに基づいた動的な色分け）
- 既存のダミーデータを修正し、より現実的なデータ構造（チーム名、イニングスコア）に変更

**新たに必要になったタスク**:

- Biomeのインポート順序修正（gameItem.tsx）
  - 型インポートは通常のインポートの後に配置する必要があった

**技術的理由でスキップしたタスク**:

なし（全タスク完了）

### 学んだこと

**技術的な学び**:

- Next.js 16 の動的ルートでは `params` が Promise になっており、`await params` が必要
- Server Components でダミーデータを扱う場合、同期的なデータ取得が可能
- スコアボードの先攻・後攻表示は isHome フラグで制御することでシンプルに実装できる

**プロセス上の改善点**:

- ステアリングファイルを使った段階的な実装管理が効果的だった
- tasklist.md の更新を各タスク完了時に行うことで進捗が明確になった

### 次回への改善提案

- スペックで定義されているEnumの型（大文字）と実装（小文字）の差異を早期に統一すべき
- 共通で使用する勝敗バッジのスタイルロジックは、ユーティリティ関数として抽出することで保守性が向上する
- アクセシビリティ（aria-label、caption）の考慮をタスク計画段階で入れるべき
